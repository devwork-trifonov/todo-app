(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{168:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return ke}));var n=a(0),r=a.n(n),o=a(4),c=a(24),l=a(41),i=a(42),s=a(43),d=a(44);function u(e){var t=e.user,a=new Date(t.created_at),n=" ".concat(a.getDate()," ").concat(a.getMonth()+1," ").concat(a.getFullYear());return r.a.createElement("div",{className:"profile"},r.a.createElement("img",{className:"profile__avatar",src:t.avatar,alt:"avatar"}),r.a.createElement("div",{className:"profile__wrapper"},r.a.createElement("div",{className:"profile__name"},t.first_name+" "," ",t.last_name),r.a.createElement("div",{className:"profile__joined"},r.a.createElement("span",null,"Зарегистрирован:"),n)))}function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function v(e){var t=e.password,a=e.setPassword,o=(e.resetPasswordMessage,{current:"",new_password:"",new_password_confirmation:""}),c=document.querySelector('meta[name="csrf-token"]').content,l=f(Object(n.useState)(o),2),i=l[0],s=l[1],d=f(Object(n.useState)(),2),u=d[0],v=d[1],y=f(Object(n.useState)("change-password__message"),2),b=y[0],_=y[1];function E(e){var t=e.target,a=t.name,n=t.value;s((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){p(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,p({},a,n))}))}return Object(n.useEffect)((function(){v(t.message),"error"===t.type?_("change-password__message change-password__message_type_error"):"success"===t.type?_("change-password__message change-password__message_type_success"):_("change-password__message")}),[t]),r.a.createElement("div",{className:"change-password"},r.a.createElement("h1",null,"Изменить пароль"),r.a.createElement("span",null,"Для изменения пароля введите свой текущий пароль и новый пароль"),r.a.createElement("div",{className:b},u),r.a.createElement("form",{className:"change-password__form",onSubmit:function(e){return function(e){e.preventDefault();var t=JSON.stringify(i);a(t,c),s(o)}(e)}},r.a.createElement("label",{className:"change-password__label",htmlFor:"current"},"текущий пароль:",r.a.createElement("input",{className:"change-password__input",required:!0,maxLength:"16",minLength:"8",name:"current",type:"password",autoComplete:"off",autoCorrect:"off",spellCheck:"off",value:i.current,onChange:E})),r.a.createElement("label",{className:"change-password__label",htmlFor:"new_password"},"Новый пароль:",r.a.createElement("input",{className:"change-password__input",required:!0,maxLength:"16",minLength:"8",name:"new_password",type:"password",autoComplete:"off",autoCorrect:"off",spellCheck:"off",value:i.new_password,onChange:E})),r.a.createElement("label",{className:"change-password__label",htmlFor:"new_password_confirmation"},"Новый пароль (еще раз):",r.a.createElement("input",{className:"change-password__input",required:!0,maxLength:"16",minLength:"8",name:"new_password_confirmation",type:"password",autoComplete:"off",autoCorrect:"off",spellCheck:"off",value:i.new_password_confirmation,onChange:E})),r.a.createElement("input",{type:"hidden",name:"_token",value:c}),r.a.createElement("button",{className:"btn btn_purpose_account-actions change-password__btn",type:"submit"},"Сменить пароль")))}function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){_(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function h(e){var t=e.user,a=E(Object(n.useState)({password:"",confirmation:!1}),2),o=a[0],c=a[1];function l(e){var t=e.target,a=t.name,n=t.value,r=t.checked;c("password"===a?function(e){return b({},e,_({},a,n))}:function(e){return b({},e,_({},a,r))})}return r.a.createElement("div",{className:"delete-profile"},r.a.createElement("h1",null,"Закрыть ваш профиль"),r.a.createElement("div",{className:"delete-profile__warning"},"Ты удаляешь свою учётную запись в Remember to progress. Это также удалит всю информацию, которая с ней связана. Пожалуйста, введи пароль для подтверждения."),r.a.createElement("span",{className:"delete-profile__name-label"},"имя пользователя"),r.a.createElement("div",{className:"delete-profile__name"},t.first_name+" "," ",t.last_name),r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault()}(e)}},r.a.createElement("label",{className:"delete-profile__password-label",htmlFor:"password"},"пароль"),r.a.createElement("input",{className:"delete-profile__password-input",type:"password",name:"password",id:"password",value:o.password,onChange:l}),r.a.createElement("div",{className:"delete-profile__checkbox"},r.a.createElement("input",{type:"checkbox",name:"confirmation",id:"confirmation",checked:o.confirmation,onChange:l}),r.a.createElement("label",{htmlFor:"confirmation",className:"delete-profile__checkbox-label"},"Да, я хочу удалить свою учётную запись.")),r.a.createElement("button",{className:"btn btn_style_dangerous",type:"submit"},"Удалить учётную запись")))}var g=a(80),w=a(64),O=a.n(w);function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function k(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function x(e){var t=e.canvasPropsObject,a=e.updatePhoto,o=j(Object(n.useState)({}),2),c=o[0],l=o[1],i=j(Object(n.useState)(0),2),s=i[0],d=i[1],u=j(Object(n.useState)(0),2),m=u[0],p=u[1],f=j(Object(n.useState)({canvWidth:0,canvHeight:0}),2),v=f[0],y=f[1],b=Object(n.useRef)(),_=Object(n.useRef)(),E=Object(n.useRef)();Object(n.useEffect)((function(){return h(),document.addEventListener("scroll",h),function(){return document.removeEventListener("scroll",h)}}),[]);var h=Object(n.useCallback)((function(){O()((function(){d(_.current.getBoundingClientRect().left),p(_.current.getBoundingClientRect().top)}),40)})),w=document.querySelector('meta[name="csrf-token"]').content,x={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out"},D=Object(n.useMemo)((function(){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){k(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},x)}));function T(e){for(var a=0,n=Object.keys(e);a<n.length;a++){var r=n[a];t[r]=e[r]}!function(){var e=E.current.getContext("2d"),a=t.props,n=a.sx,r=a.sy,o=a.sWidth,c=a.sHeight,l=a.dx,i=a.dy,s=a.dWidth,d=a.dHeight,u=a.src;e.clearRect(0,0,640,640);var m=new Image;m.src=u,m.addEventListener("load",(function(){e.drawImage(m,n,r,o,c,l,i,s,d)}))}(),function(){for(var e={left:"".concat(t.props.dx,"px"),top:"".concat(t.props.dy,"px"),width:"".concat(t.props.dWidth,"px"),height:"".concat(t.props.dHeight,"px"),border:"3px solid #000000"},a=0,n=Object.keys(e);a<n.length;a++){var r=n[a];b.current.style.setProperty(r,e[r])}}()}var A=Object(n.useCallback)((function(e){}),[]),I=Object(n.useCallback)((function(e){}),[]),S=Object(g.a)({onDrop:function(e){if(e[0]){var t=e[0],a=new FileReader;a.readAsDataURL(t),a.onloadend=function(e){E.current.getContext("2d").clearRect(0,0,640,640);var t,a,n=new Image,r=e.target.result;n.src=r,l(r),n.addEventListener("load",(function(){var e=n.width/640,o=n.height/640;if(n.width>n.height){t=n.width/e;var c=(a=n.height/e)/2;T({imgWidth:n.width,imgHeight:n.height,canvWidth:t,canvHeight:a,dx:0,dy:0,sx:0,sy:0,dHeight:c,dWidth:c,sHeight:n.height/2,sWidth:n.width*c/t,src:r,sxRatio:n.width*c/t/c,syRatio:n.height/2/c}),y({canvWidth:t,canvHeight:a})}else{t=n.width/o,a=n.height/o;var l=t/2;T({canvWidth:t,canvHeight:a,dx:0,dy:0,sx:0,sy:0,dHeight:l,dWidth:l,sHeight:n.width/2,sWidth:n.width*l/t,src:r,sxRatio:n.width*l/t/l,syRatio:n.width/2/l}),y({canvWidth:t,canvHeight:a})}}))}}},onDropAccepted:A,onDropRejected:I,multiple:!1}),C=S.getRootProps,P=S.getInputProps,M=S.isDragActive,R=O()((function(e,a){var n=t.props,r=n.canvWidth,o=n.canvHeight,c=n.sxRatio,l=n.syRatio,i=n.dWidth,d=n.dHeight,u=n.mouseClickOffsetX,p=n.mouseClickOffsetY,f=n.dxWhenMouseDown,v=n.dyWhenMouseDown,y=f+(e-s-u),b=v+(a-m-p);y>=0&&b>=0&&y<r-i&&b<o-d&&T({sx:y*c,sy:b*l,dx:y,dy:b})}),20);return r.a.createElement("div",{className:"upload-photo"},r.a.createElement("div",C({style:D}),r.a.createElement("input",P()),M?r.a.createElement("p",null,"Drop the files here ..."):r.a.createElement("p",null,"Перетащите фотографию сюда или нажмите, чтобы выбрать.")),r.a.createElement("div",{className:"upload-photo__img-container",id:"img-container",ref:_,onMouseDown:function(e){e.target==b.current&&T({isChangingTarget:!0,mouseClickOffsetX:e.clientX-s,mouseClickOffsetY:e.clientY-m,dxWhenMouseDown:t.props.dx,dyWhenMouseDown:t.props.dy})},onMouseMove:function(e){t.props.isChangingTarget&&R(e.clientX,e.clientY)},onMouseUp:function(){T({isChangingTarget:!1})},style:{backgroundImage:"url(".concat(c,")"),backgroundSize:"contain",backgroundRepeat:"no-repeat",width:"".concat(v.canvWidth,"px"),height:"".concat(v.canvHeight,"px")}},r.a.createElement("canvas",{id:"img-preview",className:"img-preview",ref:E,width:v.canvWidth,height:v.canvHeight}),r.a.createElement("div",{id:"target-rectangle",ref:b,style:{position:"absolute"}})),r.a.createElement("button",{className:"btn btn_purpose_account-actions upload-photo__btn",onClick:function(){y({canvWidth:t.props.dWidth,canvHeight:t.props.dHeight}),T({dx:0,dy:0}),setTimeout((function(){E.current.toBlob((function(e){a(e,w)}),5)}))}},"Сменить фото профиля"))}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function T(e){var t=e.user,a=e.updatePhoto,l=e.password,i=e.setPassword,s=e.resetPasswordMessage,d=D(Object(n.useState)(Object(c.f)().pathname),2),m=d[0],p=d[1];Object(n.useEffect)((function(){m.endsWith("/")&&p(m.slice(0,-1))}));var f={imgWidth:0,imgHeight:0,canvWidth:0,canvHeight:0,sx:0,sy:0,sxRatio:0,syRatio:0,sWidth:0,sHeight:0,dx:0,dy:0,dxWhenMouseDown:0,dyWhenMouseDown:0,dWidth:0,dHeight:0,mouseClickOffsetX:0,mouseClickOffsetY:0,src:"",get props(){return this}};function y(e){return e.links.map((function(e){return r.a.createElement("li",{key:e.key},r.a.createElement(o.b,{onClick:function(){return p(e.path)},to:{pathname:"".concat(e.path)},className:"".concat(e.path)===m?"account-sidebar__link account-sidebar__link_active":"account-sidebar__link"},e.children))}))}return r.a.createElement(o.a,null,r.a.createElement("main",{className:"rts__main static-main"},r.a.createElement("header",{className:"static-main__header"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Account"),r.a.createElement("h2",null,"Ваша учетная запись"))),r.a.createElement("section",{className:"static-main__content account"},r.a.createElement("div",{className:"container account__wrapper"},r.a.createElement("nav",{className:"account__sidebar account-sidebar"},r.a.createElement("ul",null,r.a.createElement(y,{links:[{path:"/account",key:1,children:"Обзор"},{path:"/account/password",key:2,children:"Изменить пароль"},{path:"/account/avatar",key:3,children:"Сменить фото"},{path:"/account/delete",key:4,children:"Закрыть профиль"}]}))),r.a.createElement("article",{className:"account__right-block"},r.a.createElement(c.b,{exact:!0,path:"/account"},r.a.createElement(u,{user:t})),r.a.createElement(c.b,{exact:!0,path:"/account/password"},r.a.createElement(v,{resetPasswordMessage:s,password:l,setPassword:i})),r.a.createElement(c.b,{exact:!0,path:"/account/delete"},r.a.createElement(h,{user:t})),r.a.createElement(c.b,{exact:!0,path:"/account/avatar"},r.a.createElement(x,{canvasPropsObject:f,updatePhoto:a})))))))}var A=a(25);function I(e){var t=e.user,a=e.logout,n=document.querySelector('meta[name="csrf-token"]').content;return r.a.createElement("nav",{className:"nav rts__nav"},r.a.createElement("div",{className:"container nav__wrapper"},r.a.createElement(o.b,{to:"/app",className:"nav__logo logo"}),r.a.createElement("ul",{className:"nav__ul"},r.a.createElement("li",null,r.a.createElement(o.b,{to:"/tour"},"Знакомство")),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/new"},"Что нового?")),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/upgrade"},"Обновить")),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/help"},"Помощь")),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/app"},"Запустить приложение"))),r.a.createElement("div",{className:"account-dropdown"},r.a.createElement("button",{className:"account-dropdown__btn",onClick:function(e){var t,a;t=document.getElementsByClassName("dropdown-menu")[0],a=document.getElementById("account-dropdown__logo"),t.classList.toggle("dropdown-menu_opened"),document.addEventListener("click",(function(e){t.classList.contains("dropdown-menu_opened")&&e.target!==a&&t.classList.remove("dropdown-menu_opened")}))}},r.a.createElement("img",{id:"account-dropdown__logo",src:t.avatar,alt:"avatar"})),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement("div",{className:"dropdown-menu__details"},r.a.createElement("img",{className:"avatar",src:t.avatar,alt:"avatar"}),r.a.createElement("div",null,r.a.createElement("div",{className:"name"},t.first_name," ",t.last_name),r.a.createElement("div",{className:"email"},t.email))),r.a.createElement("div",{className:"dropdown-menu__links-wrapper"},r.a.createElement(o.b,{to:"/account",className:"dropdown-menu__link"},"Account")),r.a.createElement("button",{onClick:function(){return a(n)},className:"dropdown-menu__btn"},"Выйти")))))}var S=a(34),C=a(9),P=a(10),M=a(14),R=a(45),H=a.n(R),L=a(79);a(86);function F(e){var t=e.dateListStyle,a=e.days,n=e.startDate,o=e.setStartDate,c=e.dateList,l=e.className,i=e.dateListPickHandle,s=e.datepickerHandle,d=a.today,u=a.tomorrow,m=a.firstDayAfterTomorrow,p=a.secondDayAfterTomorrow,f=a.thirdDayAfterTomorrow,v=a.oneWeek;return r.a.createElement("div",{className:l,style:t,ref:c},r.a.createElement("div",{className:"date-list__element",date:"today",onClick:i},r.a.createElement("div",{className:"day-of-week"},"Сегодня"),r.a.createElement("div",{className:"date"},d.format("DD MMM"))),r.a.createElement("div",{className:"date-list__element",date:"tomorrow",onClick:i},r.a.createElement("div",{className:"day-of-week"},"Завтра"),r.a.createElement("div",{className:"date"},u.format("DD MMM"))),r.a.createElement("div",{className:"date-list__element",date:"firstDayAfterTomorrow",onClick:i},r.a.createElement("div",{className:"day-of-week"},m.format("dddd")),r.a.createElement("div",{className:"date"},m.format("DD MMM"))),r.a.createElement("div",{className:"date-list__element",date:"secondDayAfterTomorrow",onClick:i},r.a.createElement("div",{className:"day-of-week"},p.format("dddd")),r.a.createElement("div",{className:"date"},p.format("DD MMM"))),r.a.createElement("div",{className:"date-list__element",date:"thirdDayAfterTomorrow",onClick:i},r.a.createElement("div",{className:"day-of-week"},f.format("dddd")),r.a.createElement("div",{className:"date"},f.format("DD MMM"))),r.a.createElement("div",{className:"date-list__element",date:"oneWeek",onClick:i},r.a.createElement("div",{className:"day-of-week"},v.format("[1 неделя]")),r.a.createElement("div",{className:"date"},v.format("DD MMM"))),r.a.createElement("div",{className:"date-list__element",date:"noLimit",onClick:i},r.a.createElement("div",{className:"day-of-week"},"Нет срока"),r.a.createElement("div",{className:"date"},"не указано")),r.a.createElement("div",{className:"date-list__element"},r.a.createElement("div",{className:"day-of-week"},"Календарь"),r.a.createElement("div",{className:"date"},"►"),r.a.createElement("div",{className:"datepicker"},r.a.createElement(H.a,{selected:n,onChange:function(e){o(e)},locale:"ru",inline:!0,shouldCloseOnSelect:!1},r.a.createElement("div",{className:"datepicker__submit"},r.a.createElement("button",{className:"btn btn_uppercase",onClick:s},"ок")))),r.a.createElement("div",{className:"under-datepicker"}),r.a.createElement("div",{className:"over-datepicker"})))}function W(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(Object(a),!0).forEach((function(t){X(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function X(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object(R.registerLocale)("ru",L.a);var q=window.moment;function G(e){var t=e.csrfToken,a=e.addTodo,o=e.successAddedTodo,c=U(Object(n.useState)(null),2),l=c[0],i=c[1],s=U(Object(n.useState)(null),2),d=s[0],u=s[1],m=U(Object(n.useState)(null),2),p=m[0],f=m[1],v=U(Object(n.useState)(null),2),y=v[0],b=v[1],_=U(Object(n.useState)(""),2),E=_[0],h=_[1],g=U(Object(n.useState)({}),2),w=g[0],O=g[1],N=U(Object(n.useState)(0),2),k=N[0],j=N[1],x=Object(n.useRef)(),D=Object(n.useRef)(),T=Object(n.useRef)(),A={inputFields:[{type:"text",inputIndex:0,indexInArray:0,id:V(),value:"",top:0,left:0}],lastInput:{inputIndex:0,indexInArray:0,value:"",top:0,left:0}},I={today:q({hour:0,minute:0,seconds:0}),tomorrow:q({hour:0,minute:0,seconds:0}).add(1,"days"),firstDayAfterTomorrow:q({hour:0,minute:0,seconds:0}).add(2,"days"),secondDayAfterTomorrow:q({hour:0,minute:0,seconds:0}).add(3,"days"),thirdDayAfterTomorrow:q({hour:0,minute:0,seconds:0}).add(4,"days"),oneWeek:q({hour:0,minute:0,seconds:0}).add(7,"days"),noLimit:null},S=1,C=2,P=4,M=8,R=16,H=.5*document.body.clientWidth;function L(e,t){switch(e){case"OR":j((function(e){return e|t}));break;case"XOR":j((function(e){return e^t}))}}var B=U(Object(n.useReducer)((function(e,t){switch(t.type){case"addInputField":return Y({},e,{inputFields:[].concat(W(e.inputFields),[{type:"text",inputIndex:e.lastInput.inputIndex+1,indexInArray:e.inputFields.length,id:V(),value:""}]),lastInput:{inputIndex:e.lastInput.inputIndex+1,indexInArray:e.inputFields.length}});case"addDateField":if("text"!==e.inputFields[e.inputFields.length-1].type||e.inputFields[e.inputFields.length-1].value)return Y({},e,{inputFields:[].concat(W(e.inputFields),[{type:t.payload.type,text:t.payload.text,indexInArray:e.inputFields.length,id:V()},{type:"text",inputIndex:e.lastInput.inputIndex+1,indexInArray:e.inputFields.length+1,id:V(),value:"",top:0,left:0}]),lastInput:{inputIndex:e.lastInput.inputIndex+1,indexInArray:e.inputFields.length+1,top:e.lastInput.top,left:H/7}});var a=e.inputFields.slice(0,e.inputFields.length-1);return Y({},e,{inputFields:[].concat(W(a),[{type:t.payload.type,text:t.payload.text,indexInArray:e.inputFields.length-1,id:V()},{type:"text",inputIndex:e.lastInput.inputIndex,indexInArray:e.inputFields.length,id:V(),value:"",top:0,left:0}]),lastInput:{inputIndex:e.lastInput.inputIndex,indexInArray:e.inputFields.length,top:e.lastInput.top,left:H/7}});case"valueInput":return t.payload.indexInArray===e.lastInput.indexInArray?Y({},e,{inputFields:e.inputFields.map((function(e,a){return a!==t.payload.indexInArray?Y({},e):Object.assign({},e,{value:t.payload.value,top:t.payload.top,left:t.payload.left})})),lastInput:Y({},e.lastInput,{value:t.payload.value,top:t.payload.top,left:t.payload.left})}):Y({},e,{inputFields:e.inputFields.map((function(e,a){return a!==t.payload.indexInArray?Y({},e):Object.assign({},e,{value:t.payload.value,top:t.payload.top,left:t.payload.left})}))});case"delete":for(var n,r=e.inputFields.map((function(e){return Y({},e)})).filter((function(e){return e.indexInArray!==t.payload.indexInArray})).map((function(e){return e.indexInArray>t.payload.indexInArray?(e.indexInArray-=1,e):e})),o=[],c=1;c<r.length;c++)if("text"===r[c].type&&"text"===r[c-1].type){n=c-1;var l=r[c-1].value+r[c].value;o.push({type:"text",inputIndex:r[c-1].inputIndex,indexInArray:c-1,id:V(),value:l,top:0,left:0}),c++}else n?o.push(r[c]):n||c!==r.length-1?o.push(r[c-1]):(o.push(r[c-1]),o.push(r[c]));var i=o.map((function(e){return e.indexInArray>n?(e.indexInArray-=1,e):e}));return Y({},e,{inputFields:i,lastInput:Y({},i[i.length-1],{top:e.lastInput.top,left:e.lastInput.left})});case"reset":return A;default:return e}}),A,void 0),2),X=B[0],G=B[1];function V(){return"f".concat((~~(1e8*Math.random())).toString(16))}Object(n.useEffect)((function(){o&&(G({type:"reset"}),i(null),f(new Date),u(null),b(null),j(0))}),[o]),Object(n.useEffect)((function(){return function(){return document.removeEventListener("click",Z)}}),[]),Object(n.useEffect)((function(){return function(){return document.removeEventListener("click",$)}}),[]),Object(n.useEffect)((function(){y&&z()}),[y]);var z=Object(n.useCallback)((function(){var e=q(y).format("DD MMM"),t=E;switch(E){case"dueDate":i(y),G({type:"addDateField",payload:{type:t,text:e}}),L("OR",M);break;case"startDate":u(y),G({type:"addDateField",payload:{type:t,text:e}}),L("OR",R)}}),[y,R,E,M]);var K=function(e){return null===e?null:q(e).utc().format("YYYY-MM-DD HH:mm:ss").trim()};function Q(e){h(e),L("OR",P),document.addEventListener("click",Z),X.lastInput.left<H?O({top:X.lastInput.top,left:X.lastInput.left}):O({top:X.lastInput.top,left:H})}var Z=Object(n.useCallback)((function(e){D.current.contains(e.target)||(L("XOR",P),document.removeEventListener("click",Z))}),[P]),$=Object(n.useCallback)((function(e){T.current.contains(e.target)||(L("XOR",S),document.removeEventListener("click",$))}),[S]);return r.a.createElement("div",{className:"add-todo-form",ref:T},r.a.createElement(J,{key:2,textInputHandleChange:function(e,t,a,n,r,o){G({type:"valueInput",payload:{value:a,indexInArray:t,top:r,left:o}}),!(t>0||a.length)||k&C?t||a.length||L("XOR",C):L("OR",C)},inputFields:X.inputFields,textInputRef:x,setFormStateInputFocuded:function(){k&S||(L("OR",S),document.addEventListener("click",$))},textInputMaxWidth:H,deleteField:function(e,t){G({type:"delete",payload:{indexInArray:e}}),"dueDate"===t?(L("XOR",M),i(null)):(L("XOR",R),u(null))},className:k&S?"add-todo-form__text-input add-todo-form__text-input_focused":"add-todo-form__text-input"}),r.a.createElement(F,{key:3,dateListStyle:w,days:I,setPickedDate:b,startDate:p,setStartDate:f,dateList:D,dateListPickHandle:function(e){var t=e.currentTarget.getAttribute("date");b(I[t]),L("XOR",P),document.removeEventListener("click",Z)},datepickerHandle:function(){b(p),L("XOR",P),document.removeEventListener("click",Z)},className:k&P?"date-list_opened":"date-list"}),r.a.createElement("div",{className:k&S?"add-todo-form__controls":"add-todo-form__controls add-todo-form__controls_closed",key:4},r.a.createElement("div",{className:k&C?"options":"options_closed"},r.a.createElement("button",{onClick:function(){Q("dueDate")},disabled:Boolean(k&P||k&M),className:"due-date",title:"Указать дату выполнения"}),r.a.createElement("button",{onClick:function(){return Q("startDate")},disabled:Boolean(k&P||k&R),className:"start-date",title:"Указать начальную дату задачи"})),r.a.createElement("button",{className:"btn",disabled:!Boolean(k&C),onClick:function(){var e={body:X.inputFields.filter((function(e){return"text"===e.type&&e.value})).map((function(e){return e.value})).join(" "),begin_at:K(d),will_end_at:K(l)};a(e,t)}},"Добавить задачу")))}function V(e){e.textInputRef;var t=e.textInputHandleChange,a=e.index,o=e.text,c=e.indexInArray,l=e.setFormStateInputFocuded,i=e.inputLength,s=Object(n.useRef)(),d=Object(n.useRef)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{ref:d,index:a,type:"text",value:o,placeholder:c?null:"Добавить задачу...",style:c<i?{width:s.current.clientWidth+8}:{width:"100%"},onChange:function(e){t(a,c,e.target.value,e.target.getBoundingClientRect(),d.current.offsetHeight+e.target.offsetTop,e.target.offsetLeft+s.current.clientWidth+8)},onFocus:function(e){l()}}),r.a.createElement("div",{ref:s,style:{whiteSpace:"nowrap",display:"inline-block",backgroundColor:"green",position:"absolute",visibility:"hidden",top:-100}},o))}function z(e){var t=e.text,a=e.symbol,n=e.deleteField,o=e.indexInArray,c=e.type;return(r.a.createElement("div",{className:"picked-date"},r.a.createElement("div",{className:"picked-date__date"},a," ",t),r.a.createElement("button",{className:"picked-date__revoke",onClick:function(){return n(o,c)}},"✖")))}function J(e){var t=e.textInputHandleChange,a=e.inputFields,n=e.textInputRef,o=e.setFormStateInputFocuded,c=(e.textInputMaxWidth,e.deleteField),l=e.className;return(r.a.createElement("div",{className:l,ref:n,onMouseDown:o},a.map((function(e,a,l){return"text"===e.type?r.a.createElement(V,{textInputRef:n,textInputHandleChange:t,key:a,index:e.inputIndex,text:e.value,indexInArray:e.indexInArray,setFormStateInputFocuded:o,inputLength:l.length-1}):"dueDate"===e.type?r.a.createElement(z,{id:e.id,text:e.text,symbol:"^",key:a,deleteField:c,indexInArray:e.indexInArray,type:e.type}):"startDate"===e.type?r.a.createElement(z,{id:e.id,text:e.text,symbol:"~",key:a,deleteField:c,indexInArray:e.indexInArray,type:e.type}):void 0}))))}function K(e){var t=e.expiredTodos,a=e.weekTodos,n=e.tommorowTodos,c=e.todayTodos,l=e.todos,i=e.navBarState;return(r.a.createElement("nav",{className:i?"category-nav category-nav_opened":"category-nav category-nav_closed"},r.a.createElement("img",{className:"category-nav__logo",src:"/images/logo.svg",alt:"logo"}),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(o.c,{to:"/app/all",isActive:function(e,t){return"all"===t.pathname.slice(5,8)},className:"category-nav__link",activeClassName:"category-nav__link_active"},"Все задачи"),r.a.createElement("div",{className:l.length||t.length?"category-nav__counter":"category-nav__counter_empty"},l.length+t.length)),r.a.createElement("li",null,r.a.createElement(o.c,{to:"/app/today",isActive:function(e,t){return"today"===t.pathname.slice(5,10)},className:"category-nav__link",activeClassName:"category-nav__link_active"},"Сегодня"),r.a.createElement("div",{className:c.length||t.length?"category-nav__counter":"category-nav__counter_empty"},c.length+t.length)),r.a.createElement("li",null,r.a.createElement(o.c,{to:"/app/tommorow",isActive:function(e,t){return"tommorow"===t.pathname.slice(5,13)},className:"category-nav__link",activeClassName:"category-nav__link_active"},"Завтра"),r.a.createElement("div",{className:n.length?"category-nav__counter":"category-nav__counter_empty"},n.length)),r.a.createElement("li",null,r.a.createElement(o.c,{to:"/app/week",isActive:function(e,t){return"week"===t.pathname.slice(5,9)},className:"category-nav__link",activeClassName:"category-nav__link_active"},"Неделя"),r.a.createElement("div",{className:a.length||t.length?"category-nav__counter":"category-nav__counter_empty"},a.length+t.length)))))}function Q(e){var t=e.todoListName,a=e.toggleNavBarState,n=e.navBarState;return(r.a.createElement("div",{className:n?"nav-burger":"nav-burger nav-burger_opened",onClick:a},r.a.createElement("div",{className:"nav-burger__icon"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)),r.a.createElement("div",{className:"nav-burger__list-name"},t)))}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}q.locale("ru");var $=window.moment;function ee(e){var t=e.note,a=e.avatar,o=e.setNoteBody,c=e.deleteNote,l=e.CSRF_TOKEN,i=Z(Object(n.useState)(15),2),s=i[0],d=i[1],u=Z(Object(n.useState)(!1),2),m=u[0],p=u[1],f=Z(Object(n.useState)(""),2),v=f[0],y=f[1],b=Object(n.useRef)();return Object(n.useEffect)((function(){b.current.innerText=t.body,y(t.body),d(b.current.clientHeight)}),[]),Object(n.useEffect)((function(){d(m?b.current.clientHeight+15:b.current.clientHeight)}),[m]),r.a.createElement("div",{className:"note"},r.a.createElement("div",{style:{height:s},className:m?"note__text-input-wrapper note__text-input-wrapper_focused":"note__text-input-wrapper"},r.a.createElement("div",{className:"note__avatar-wrapper"},r.a.createElement("img",{src:a,alt:"user",className:"avatar"})),r.a.createElement("div",{ref:b,className:"text-input",onInput:function(e){y(e.target.innerText.trim()),d(e.target.clientHeight)},contentEditable:m})),m?r.a.createElement("div",{className:"note__buttons-wrapper"},r.a.createElement("button",{disabled:t.body===v,className:"btn",onClick:function(){o({id:t.id,body:v},l),p(!1)}},"Сохранить"),r.a.createElement("button",{className:"btn btn_style_blond",onClick:function(){b.current.textContent=t.body,p(!1),y(t.body)}},"Отмена")):r.a.createElement("div",{className:"controls"},r.a.createElement("div",null,t.created_at===t.updated_at?$(t.created_at).calendar($(),{sameDay:"[Сегодня в] HH:mm",lastDay:"[Вчера в] HH:mm",lastWeek:"DD MMM [в] HH:mm",sameElse:"DD MMM [в] HH:mm"}):"Изменено ".concat($(t.updated_at).calendar($(),{sameDay:"[сегодня в] HH:mm",lastDay:"[вчера в] HH:mm",lastWeek:"DD MMM [в] HH:mm",sameElse:"DD MMM [в] HH:mm"}))),r.a.createElement("button",{className:"controls__button",onClick:function(){p(!0)}},"Изменить"),r.a.createElement("button",{className:"controls__button",onClick:function(){c({id:t.id},l)}},"Удалить"))," ")}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ae(e){var t=e.avatar,a=e.addNoteRequest,o=e.successReceiveNote,c=Object(n.useRef)(),l=te(Object(n.useState)(!1),2),i=l[0],s=l[1],d=te(Object(n.useState)(33),2),u=d[0],m=d[1],p=te(Object(n.useState)(32),2),f=p[0],v=p[1],y=te(Object(n.useState)(""),2),b=y[0],_=y[1];function E(){s(!0),33===u&&(m(50),v(49))}function h(){s(!1),c.current.textContent="",m(33),v(32),_("")}return Object(n.useEffect)((function(){o&&h()}),[o]),r.a.createElement("div",{className:"add-notes"},r.a.createElement("div",{style:{height:u},className:i?"add-notes__text-input-wrapper add-notes__text-input-wrapper_focused":"add-notes__text-input-wrapper"},r.a.createElement("div",{style:i?{display:"none"}:{display:"block"},className:"add-notes__placeholder",onClick:function(){E(),c.current.focus()}},"Добавить заметку..."),r.a.createElement("div",{className:"add-notes__avatar-wrapper"},r.a.createElement("img",{src:t,alt:"user",className:"avatar"})),r.a.createElement("div",{ref:c,className:"text-input",onInput:function(e){return function(e,t){_(e.target.innerText.trim()),m(e.target.clientHeight)}(e)},onClick:E,contentEditable:!0,style:{minHeight:f}})),i?r.a.createElement("div",{className:"add-notes__buttons-wrapper"},r.a.createElement("button",{disabled:!b&&o,className:"btn",onClick:function(){return a(b)}},"Сохранить"),r.a.createElement("button",{disabled:!o,className:"btn btn_style_blond",onClick:h},"Отмена")):null)}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var re=window.moment;function oe(e){var t=e.todoDetails,a=e.updateTodo,o=e.closeTodoDetails,c=e.updateTodoHandler,l=e.cancelTodoUpdate,i=ne(Object(n.useState)(!1),2),s=i[0],d=i[1],u=Object(n.useRef)(),m=Object(n.useRef)(),p=Object(n.useRef)();Object(n.useEffect)((function(){return document.removeEventListener("click",f)}),[]);var f=function e(t){if(p.current.contains(t.target)||u.current.contains(t.target)||m.current.contains(t.target)){if(u.current.contains(t.target))return;document.removeEventListener("click",e)}else l(),document.removeEventListener("click",e)};return r.a.createElement("div",{className:"task-details__todo-wrapper",ref:p,onClick:function(e){u.current.contains(e.target)||m.current.contains(e.target)||a()}},r.a.createElement("div",{className:"task-details__button-wrapper"},r.a.createElement("button",{ref:m,onClick:function(){l(),o(),document.removeEventListener("click",f)}},"закрыть  х")),r.a.createElement("div",{className:"task-details__todo"},r.a.createElement("div",{className:"input-wrapper"},r.a.createElement("input",{ref:u,key:t.todo.id,type:"text",value:t.todo.body,onChange:c,onKeyDown:function(e){13===e.keyCode&&a()},onFocus:function(){s||document.addEventListener("click",f),d(!0)},onBlur:function(){d(!1)}})),r.a.createElement("div",{className:"edit-fields"},t.todo.begin_at?r.a.createElement("div",{className:"date"},r.a.createElement("div",{className:"heading"},"начало")," ",r.a.createElement("div",{className:"value"},re(t.todo.begin_at).format("dd, DD MMM YY"))):null,t.todo.will_end_at?r.a.createElement("div",{className:"date"},r.a.createElement("div",{className:"heading"},"срок")," ",r.a.createElement("div",{className:"value"},re(t.todo.will_end_at).format("dd, DD MMM YY"))):r.a.createElement("div",{className:"date"},r.a.createElement("div",{className:"heading"},"срок")," ",r.a.createElement("div",{className:"value"},"никогда")))))}function ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function le(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(a),!0).forEach((function(t){ie(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ce(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ie(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var se=window.moment;function de(e){var t=e.todoList,a=e.willEndAtStyle,o=e.taskDetailsHandler,l=e.todoDetails,i=e.resetTodoDetails,s=e.list,d=e.expiredTodos,u=Object(c.h)().url;return Object(n.useEffect)((function(){i()}),[u]),s.startsWith("tommorow")?t.map((function(e){return r.a.createElement("div",{className:e.id===l.todo.id&&l.isActive?"todo todo_selected":"todo",key:e.id,onClick:function(){return o(le({},e))}},r.a.createElement("div",{className:"todo__wrapper"},r.a.createElement("span",{className:"todo__checkbox"}),r.a.createElement("div",{className:"todo__body"},e.body)),e.will_end_at?r.a.createElement("div",{className:a},se(e.will_end_at).format("DD MMM")):null)})):[d.map((function(e){return r.a.createElement("div",{className:e.id===l.todo.id&&l.isActive?"todo todo_selected":"todo",key:e.id,onClick:function(){return o(le({},e))}},r.a.createElement("div",{className:"todo__wrapper"},r.a.createElement("span",{className:"todo__checkbox"}),r.a.createElement("div",{className:"todo__body todo__body_expired"},e.body)),e.will_end_at?r.a.createElement("div",{className:"todo__will-end-at_expired"},se(e.will_end_at).format("DD MMM")):null)})),t.map((function(e){return r.a.createElement("div",{className:e.id===l.todo.id&&l.isActive?"todo todo_selected":"todo",key:e.id,onClick:function(){return o(le({},e))}},r.a.createElement("div",{className:"todo__wrapper"},r.a.createElement("span",{className:"todo__checkbox"}),r.a.createElement("div",{className:"todo__body"},e.body)),e.will_end_at?r.a.createElement("div",{className:"todo__will-end-at"},se(e.will_end_at).format("DD MMM")):null)}))]}function ue(e){var t=e.todoList,a=e.taskDetailsHandler,o=e.todoDetails,l=e.resetTodoDetails,i=Object(c.h)().url;return Object(n.useEffect)((function(){return l()}),[i]),t.map((function(e){return r.a.createElement("div",{className:e.id===o.todo.id&&o.isActive?"todo todo_selected todo_completed":"todo todo_completed",key:e.id,onClick:function(){return a(le({},e))}},r.a.createElement("div",{className:"todo__wrapper"},r.a.createElement("span",{className:"todo__checkbox"}),r.a.createElement("div",{className:"todo__body"},e.body)),e.completed_at?r.a.createElement("div",{className:"todo__completed-at"},se(e.completed_at).format("DD MMM")):null)}))}function me(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function fe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(a),!0).forEach((function(t){ve(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ve(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var be=document.querySelector('meta[name="csrf-token"]').content;function _e(e){var t,a,l=e.todos,i=e.todayTodos,s=e.tommorowTodos,d=e.weekTodos,u=e.expiredTodos,m=e.user,p=e.addTodo,f=e.successAddedTodo,v=e.completedTodos,y=e.notes,b=e.addNote,_=e.setBody,E=e.successReceiveNote,h=e.setNoteBody,g=e.deleteNote,w=e.completeTodo,O=e.restoreTodo,N=e.deleteTodo,k=e.logout,j=Object(c.g)().list,x=ye(Object(n.useState)(),2),D=x[0],T=x[1];function A(e){return e.map((function(e){return Object.assign({},e)}))}function I(e){S.current.classList.contains("dropdown-menu_opened")&&e.target!==C.current&&!S.current.contains(e.target)&&(S.current.classList.remove("dropdown-menu_opened"),document.removeEventListener("click",I))}Object(n.useEffect)((function(){window.innerWidth>992?T(!0):T(!1)}),[]),Object(n.useEffect)((function(){return function(){return document.removeEventListener("click",I)}}));var S=Object(n.useRef)(),C=Object(n.useRef)();switch(j){case"all":t=A(l),a="Все задачи";break;case"today":t=A(i),a="Сегодня";break;case"tommorow":t=A(s),a="Завтра";break;case"week":t=A(d),a="Неделя";break;default:t=A(l),a="Все задачи"}return(r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"todo-top-bar",key:0},r.a.createElement("div",{className:"todo-top-bar__settings",ref:C,onClick:function(){S.current.classList.toggle("dropdown-menu_opened"),document.addEventListener("click",I)}},r.a.createElement("div",{className:"dropdown-menu",ref:S},r.a.createElement("div",{className:"dropdown-menu__details"},r.a.createElement("img",{className:"avatar",src:m.avatar,alt:"avatar"}),r.a.createElement("div",null,r.a.createElement("div",{className:"name"},m.first_name," ",m.last_name),r.a.createElement("div",{className:"email"},m.email))),r.a.createElement("div",{className:"dropdown-menu__links-wrapper"},r.a.createElement(o.b,{to:"/account",className:"dropdown-menu__link"},"Account")),r.a.createElement("button",{onClick:function(){return k(be)},className:"dropdown-menu__btn"},"Выйти")))),r.a.createElement("div",{className:"todo-app",key:1},r.a.createElement(Q,{navBarState:D,toggleNavBarState:function(){T((function(e){return!e}))},todoListName:a}),r.a.createElement(K,{key:0,expiredTodos:u,weekTodos:d,tommorowTodos:s,todayTodos:i,todos:l,navBarState:D}),r.a.createElement(Ee,{key:1,addTodo:p,expiredTodos:u,successAddedTodo:f,completedTodos:v,notes:y,addNote:b,setBody:_,todoList:t,todoListName:a,user:m,successReceiveNote:E,setNoteBody:h,deleteNote:g,completeTodo:w,restoreTodo:O,deleteTodo:N,navBarState:D}))))}function Ee(e){var t=e.addTodo,a=e.expiredTodos,l=e.successAddedTodo,i=e.notes,s=e.completedTodos,d=e.setBody,u=e.todoList,m=e.todoListName,p=e.user,f=e.addNote,v=e.successReceiveNote,y=e.setNoteBody,b=e.deleteNote,_=e.completeTodo,E=e.restoreTodo,h=e.deleteTodo,g=e.navBarState,w=Object(c.g)().list,O={isActive:!1,todo:{id:-1},earlyTodo:{id:-1},notes:[{id:-1,body:""}]};Object(n.useEffect)((function(){if(v&&l){var e=i.filter((function(e){return e.todo_id===j.todo.id})).map((function(e){return fe({},e)}));x({type:N,payload:{todo:j.todo,notes:e}})}}),[v,l]);var N="UPDATE_WITHOUT_SET_ACTIVE";var k=ye(Object(n.useReducer)((function(e,t){switch(t.type){case"TOGGLE_IS_ACTIVE":return fe({},e,{isActive:!e.isActive});case"REPLACEMENT_TODO":return{isActive:!0,todo:fe({},t.payload.todo),earlyTodo:fe({},t.payload.todo),notes:me(t.payload.notes)};case N:return fe({},e,{todo:fe({},t.payload.todo),earlyTodo:fe({},t.payload.todo),notes:me(t.payload.notes)});case"UPDATE_TODO":return fe({},e,{todo:fe({},e.todo,{body:t.payload.body})});case"RESET_TODO_DETAILS":return{isActive:O.isActive,todo:fe({},O.todo),earlyTodo:fe({},O.earlyTodo),notes:me(O.notes)};default:return e}}),O,void 0),2),j=k[0],x=k[1];function D(e){if(e.id!==j.todo.id){var t=i.filter((function(t){return t.todo_id===e.id})).map((function(e){return fe({},e)}));x({type:"REPLACEMENT_TODO",payload:{todo:e,notes:t}})}else x({type:"TOGGLE_IS_ACTIVE"})}function T(){x({type:"RESET_TODO_DETAILS"})}function A(){h({id:j.todo.id},be)}return(r.a.createElement("main",{className:g?"todo-main todo-main_state_with-nav":"todo-main todo-main_state_without-nav",key:0},r.a.createElement("div",{className:"todo-main__container",key:0},r.a.createElement("div",{className:"status-links"},r.a.createElement("div",null),r.a.createElement(o.c,{exact:!0,to:"/app/".concat(w),isActive:function(e,t){var a=w.length,n=parseInt(t.pathname.slice(6+a));return t.pathname==="/app/".concat(w)||(!isNaN(n)&&t.pathname==="/app/".concat(w,"/").concat(n)||void 0)},className:"status-links__link",activeClassName:"status-links__link_active"},"Незавершённые"),r.a.createElement(o.c,{exact:!0,to:"/app/".concat(w,"/completed"),isActive:function(e,t){var a=w.length,n=parseInt(t.pathname.slice(16+a));return t.pathname==="/app/".concat(w,"/completed")||(!isNaN(n)&&t.pathname==="/app/".concat(w,"/completed/").concat(n)||void 0)},className:"status-links__link",activeClassName:"status-links__link_active"},"Завершённые")),r.a.createElement(c.b,{exact:!0,path:"/app/".concat(w)},j.isActive?r.a.createElement("div",{className:"toolbar"},r.a.createElement("button",{className:"toolbar__button toolbar__button_purpose_complete",title:"Завершить задачу",onClick:function(){_({id:j.todo.id},be),x({type:"RESET_TODO_DETAILS"})}}),r.a.createElement("button",{className:"toolbar__button toolbar__button_purpose_delete",title:"Удалить задачу",onClick:A})):r.a.createElement("div",{className:"toolbar"}),r.a.createElement(G,{csrfToken:be,addTodo:t,successAddedTodo:l}),r.a.createElement("div",{className:"todo-list"},r.a.createElement(de,{list:w,expiredTodos:a,todoList:u,willEndAtStyle:"todo__will-end-at",taskDetailsHandler:D,todoDetails:j,resetTodoDetails:T}))),r.a.createElement(c.b,{exact:!0,path:"/app/".concat(w,"/completed")},j.isActive?r.a.createElement("div",{className:"toolbar"},r.a.createElement("button",{className:"toolbar__button toolbar__button_purpose_restore",title:"Восстановить",onClick:function(){E({id:j.todo.id},be),x({type:"RESET_TODO_DETAILS"})}}),r.a.createElement("button",{className:"toolbar__button toolbar__button_purpose_delete",title:"Удалить задачу",onClick:A})):r.a.createElement("div",{className:"toolbar"}),r.a.createElement("div",{className:"empty-block"}),r.a.createElement("div",{className:"todo-list"},r.a.createElement(ue,{todoList:s,taskDetailsHandler:D,todoDetails:j,resetTodoDetails:T})))),r.a.createElement("div",{className:"additional-info",key:1},r.a.createElement("h4",null,m),r.a.createElement("div",{className:"additional-info__wrapper"},r.a.createElement("div",{className:"counter"},r.a.createElement("div",{className:"tasks"},u.length),r.a.createElement("span",null,"задач(и)")),r.a.createElement("div",{className:"counter"},r.a.createElement("div",{className:"expired"},a.length),r.a.createElement("span",null,"просрочено")),r.a.createElement("div",{className:"counter"},r.a.createElement("div",{className:"completed"},s.length),r.a.createElement("span",{className:"completed"},"завершено")))),r.a.createElement("div",{key:2,className:j.isActive?"task-details task-details_opened":"task-details"},r.a.createElement(oe,{todoDetails:j,updateTodo:function(){j.earlyTodo.body!==j.todo.body&&d({id:j.todo.id,body:j.todo.body},be)},closeTodoDetails:function(){x({type:"TOGGLE_IS_ACTIVE"})},updateTodoHandler:function(e){e.target.value&&x({type:"UPDATE_TODO",payload:{body:e.target.value}})},cancelTodoUpdate:function(){x({type:"UPDATE_TODO",payload:{body:j.earlyTodo.body}})}}),r.a.createElement("div",{className:"task-details__notes-wrapper"},r.a.createElement("h3",null,"Заметки"),r.a.createElement(ae,{avatar:p.avatar,addNoteRequest:function(e){f({body:e,todo_id:j.todo.id},be)},successReceiveNote:v}),r.a.createElement("div",{className:"task-details__notes"},j.isActive?j.notes.map((function(e){return r.a.createElement(ee,{note:e,avatar:p.avatar,key:e.id,setNoteBody:y,deleteNote:b,CSRF_TOKEN:be})})):null)))))}function he(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ge(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var we=a(147),Oe=window.moment;var Ne=Object(S.b)((function(e){var t=e.todos,a=e.user.userData,n=t.isFetchingTodos,r=t.todosData,o=t.successAddedTodo,c=e.notes;return{todos:t,isFetchingTodos:n,todosData:r,userData:a,successAddedTodo:o,successReceiveNote:c.successReceiveNote,notes:c.notes}}),(function(e){return{logoutUser:function(t){return e(Object(C.i)(t))},addNote:function(t,a){return e(Object(M.d)(t,a))},addTodo:function(t,a){return e(Object(P.f)(t,a))},setBody:function(t,a){return e(Object(P.k)(t,a))},setNoteBody:function(t,a){return e(Object(M.g)(t,a))},deleteNote:function(t,a){return e(Object(M.e)(t,a))},completeTodo:function(t,a){return e(Object(P.g)(t,a))},restoreTodo:function(t,a){return e(Object(P.j)(t,a))},deleteTodo:function(t,a){return e(Object(P.h)(t,a))}}}))((function(e){var t=e.logoutUser,a=e.isFetchingTodos,n=e.userData,o=e.todosData,c=e.successAddedTodo,l=e.notes,i=e.successReceiveNote,s=we.tz.guess(),d=function(e){return null===e?null:Oe(e).tz(s).format("YYYY-MM-DD[T]HH:mm:ss")},u=Oe({hour:0,minute:0,seconds:0}),m=o.map((function(e){var t=Object.assign({},e);return t.created_at=d(t.created_at),t.begin_at=d(t.begin_at),t.completed_at=d(t.completed_at),t.updated_at=d(t.updated_at),t.will_end_at=d(t.will_end_at),t})).filter((function(e){return!e.completed})),p=o.filter((function(e){return e.completed})).map((function(e){var t=Object.assign({},e);return t.created_at=d(t.created_at),t.begin_at=d(t.begin_at),t.completed_at=d(t.completed_at),t.updated_at=d(t.updated_at),t.will_end_at=d(t.will_end_at),t})),f=m.filter((function(e){return e.will_end_at})).filter((function(e){return Oe(e.will_end_at).diff(u,"days")<0})).map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?he(Object(a),!0).forEach((function(t){ge(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):he(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{expired:!0})})),v=m.filter((function(e){return!e.will_end_at||Oe(e.will_end_at).diff(u,"days")>=0})),y=m.filter((function(e){return e.will_end_at})).filter((function(e){return 0===Oe(e.will_end_at).diff(u,"days")})),b=m.filter((function(e){return e.will_end_at})).filter((function(e){return 1===Oe(e.will_end_at).diff(u,"days")})),_=m.filter((function(e){return e.will_end_at})).filter((function(e){return Oe(e.will_end_at).diff(u,"days")<8&&Oe(e.will_end_at).diff(u,"days")>0}));return a?r.a.createElement("h2",null,"Loading..."):r.a.createElement(_e,{todos:v,todayTodos:y,tommorowTodos:b,weekTodos:_,expiredTodos:f,user:n,logout:t,addTodo:e.addTodo,successAddedTodo:c,completedTodos:p,notes:l,addNote:e.addNote,setBody:e.setBody,successReceiveNote:i,setNoteBody:e.setNoteBody,deleteNote:e.deleteNote,completeTodo:e.completeTodo,restoreTodo:e.restoreTodo,deleteTodo:e.deleteTodo})}));function ke(e){var t=e.user,a=e.updatePhoto,n=e.logout,u=e.resetPasswordMessage,m=e.setPassword,p=e.password;return(r.a.createElement(o.a,null,r.a.createElement(c.b,{exact:!0,path:"/"},r.a.createElement(c.a,{to:"/app/all"})),r.a.createElement(c.b,{exact:!0,path:"/app"},r.a.createElement(c.a,{to:"/app/all"})),r.a.createElement(c.b,{path:"/login"},r.a.createElement(c.a,{to:"/app/all"})),r.a.createElement(c.b,{path:"/register"},r.a.createElement(c.a,{to:"/app/all"})),r.a.createElement(c.b,{path:"/app/:list"},r.a.createElement(Ne,null)),r.a.createElement(c.b,{path:"/todos"},r.a.createElement(c.a,{to:"/app"})),r.a.createElement(c.b,{path:"/tour"},r.a.createElement(I,{user:t,logout:n}),r.a.createElement(l.a,null),r.a.createElement(A.a,null)),r.a.createElement(c.b,{path:"/new"},r.a.createElement(I,{user:t,logout:n}),r.a.createElement(i.a,null),r.a.createElement(A.a,null)),r.a.createElement(c.b,{path:"/upgrade"},r.a.createElement(I,{user:t,logout:n}),r.a.createElement(s.a,null),r.a.createElement(A.a,null)),r.a.createElement(c.b,{path:"/help"},r.a.createElement(I,{user:t,logout:n}),r.a.createElement(d.a,null),r.a.createElement(A.a,null)),r.a.createElement(c.b,{path:"/account"},r.a.createElement(I,{user:t,logout:n}),r.a.createElement(T,{user:t,updatePhoto:a,resetPasswordMessage:u,setPassword:m,password:p}),r.a.createElement(A.a,null))))}},25:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0),r=a.n(n),o=a(4);function c(){return r.a.createElement("footer",{className:"rts__footer static-footer"},r.a.createElement("div",{className:"container static-footer__wrapper"},r.a.createElement("div",{className:"static-footer__logo"}),r.a.createElement("div",{className:"static-footer__links"},r.a.createElement("h4",null,"Компания"),r.a.createElement("ul",null,r.a.createElement("li",null,"О проекте"),r.a.createElement("li",null,"Задания"),r.a.createElement("li",null,"Пресса"),r.a.createElement("li",null,"Блог"))),r.a.createElement("div",{className:"static-footer__links"},r.a.createElement("h4",null,"Продукт"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(o.b,{to:"/tour"},"Знакомство")),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/new"},"Что нового")," "),r.a.createElement("li",null,"Интеграции"),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/upgrade"},"Обновить")))),r.a.createElement("div",{className:"static-footer__links"},r.a.createElement("h4",null,"Сообщество"),r.a.createElement("ul",null,r.a.createElement("li",null,"Форумы"),r.a.createElement("li",null,"Программа тестирования"),r.a.createElement("li",null,"Переводы"),r.a.createElement("li",null,"API"))),r.a.createElement("div",{className:"static-footer__links"},r.a.createElement("h4",null,"Поддержка"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(o.b,{to:"/help"},"Помощь")),r.a.createElement("li",null,"Советы и хитрости"),r.a.createElement("li",null,r.a.createElement("a",{href:"mailto:devwork.trifonov@gmail.com"},"Связаться с нами"))))))}},41:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(0),r=a.n(n);function o(){return r.a.createElement("main",{className:"rts__main static-main"},r.a.createElement("header",{className:"static-main__header"},r.a.createElement("div",{className:"container static-main__headers-wrapper"},r.a.createElement("h1",null,"Tour"),r.a.createElement("h2",null,"Hop aboard and enjoy the tour!"))))}},42:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(0),r=a.n(n);function o(){return r.a.createElement("main",{className:"rts__main static-main"},r.a.createElement("header",{className:"static-main__header"},r.a.createElement("div",{className:"container static-main__headers-wrapper"},r.a.createElement("h1",null,"What's new?"),r.a.createElement("h2",null,"The latest moos from the team"))))}},43:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(0),r=a.n(n);function o(){return r.a.createElement("main",{className:"rts__main static-main"},r.a.createElement("header",{className:"static-main__header static-main__header_text-align_center"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",null," Делай больше с Pro! "),r.a.createElement("button",{className:"btn btn_style_enticing static-main__btn"},"Обновить сейчас"))))}},44:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(0),r=a.n(n);function o(){return r.a.createElement("main",{className:"rts__main static-main"},r.a.createElement("header",{className:"static-main__header"},r.a.createElement("div",{className:"container static-main__headers-wrapper"},r.a.createElement("h1",null,"Центр поддержки"),r.a.createElement("h2",null,"Мы здесь, чтобы помочь!"))))}}}]);